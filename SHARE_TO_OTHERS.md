# 游戏创作框架工作流程

本文档详细说明了游戏创作框架的完整工作流程，供团队成员和合作伙伴参考使用。

## 框架概述

游戏创作框架实现了"开发者创作基础游戏，创作者扩展内容"的双层创作模式，既保证了游戏质量，又提供了内容创作的灵活性。

## 完整工作流程

### 阶段一：开发者角色（游戏开发）

#### 1. 游戏开发
- 在`game_dev/`目录中开发支持Mod的Unity游戏
- 使用Unity 2022.3.62f1版本确保兼容性
- 游戏需要设计Mod加载机制，支持运行时替换素材和配置

#### 2. 编辑器开发
- 在`editor_dev/`目录中开发Web编辑器（`editor.html`）
- 编辑器用于后续游戏创作者制作自定义内容
- 提供用户友好的界面，支持素材上传、参数配置等功能

#### 3. 游戏打包
运行`packing_tool/build.bat`执行自动化打包，流程包括：
- **清理构建目录**：清除之前的构建产物
- **构建Unity游戏**：调用`build_html5.bat`生成HTML5版本
- **复制编辑器文件**：将`editor_dev/`内容复制到build目录
- **复制打包规则**：将`packing_rule.json`复制到build目录

#### 4. 产物封装
- 将游戏文件和编辑器封装为ZIP包
- 上传至网站供游戏创作者使用

### 阶段二：游戏创作者角色（内容创作）

#### 1. 内容发现
- 在网站上发现开发者提供的游戏和编辑器

#### 2. 内容创作
- 使用`editor.html`创建自定义数据（如敌人生成配置、素材等）
- 通过编辑器界面：
  - 上传自定义图片素材
  - 配置游戏参数
  - 生成JSON配置文件
- 生成标准化的Mod数据结构

#### 3. 发布流程
- 启动发布流程，将创作的数据封装为Mod结构
- Mod包含：
  - `mod/texture/`：图片素材（如enemy0.png, enemy1.png等）
  - `mod/audio/`：音频文件（如bgm.mp3）
  - `mod/enemy_spawn_data.json`：游戏配置数据

#### 4. 重新打包
- 将Mod数据与原始游戏重新打包为新的ZIP文件
- 最终结构：
  ```
  游戏包/
  ├── index.html           # 游戏主文件
  ├── Build/              # Unity构建文件
  └── mod/                # 用户创作的Mod数据
      ├── texture/        # 自定义图片
      ├── audio/          # 自定义音频
      └── *.json          # 配置文件
  ```
- 上传新的游戏包至网站

### 阶段三：最终用户体验

#### 1. 游戏运行
新游戏包包含：
- 原始游戏文件（保证基础功能）
- 用户创作的Mod数据（个性化内容）

#### 2. 内容加载
- 游戏运行时优先加载Mod数据
- Mod数据覆盖原始内容，实现个性化体验
- 如果Mod数据不存在或无效，则使用原始数据作为备用

## 技术要点

### 构建系统
- 使用批处理脚本（`build.bat`）自动化完成游戏构建和文件复制
- 支持开发版和发布版构建：
  - 开发版：`build.bat develop`（默认）
  - 发布版：`build.bat release`

### Mod支持机制
- 游戏在设计时考虑Mod加载机制
- 支持运行时替换素材和配置
- 实现资源优先级：Mod资源 > 原始资源

### 编辑器集成
- Web编辑器与游戏包一同发布
- 便于内容创作者直接使用
- 提供实时预览和验证功能

### 打包规则
- 通过`packing_rule.json`定义文件组织规则
- 确保不同环境下的一致性
- 支持灵活的文件包含/排除配置

## 目录结构

```
项目根目录/
├── game_dev/           # Unity游戏项目
├── editor_dev/         # Web编辑器开发
├── packing_tool/       # 构建和打包工具
├── build/              # 构建输出目录
└── wiki/               # 项目文档
```

## 使用说明

### 开发者使用
1. 在`game_dev/`中开发Unity游戏
2. 在`editor_dev/`中开发配套编辑器
3. 运行`packing_tool/build.bat`进行构建
4. 将build目录内容打包上传

### 创作者使用
1. 下载游戏包并解压
2. 打开`editor.html`进行内容创作
3. 使用编辑器生成Mod数据
4. 重新打包并发布

## 优势特点

1. **双层创作模式**：分离游戏开发和内容创作，提高效率
2. **标准化流程**：统一的构建和打包流程，减少错误
3. **模块化设计**：游戏、编辑器、打包工具相互独立
4. **扩展性强**：支持多种类型的Mod和自定义内容
5. **用户友好**：提供可视化编辑界面，降低创作门槛

---

*本文档基于实际构建脚本和项目结构编写，如有疑问请联系项目维护者。* 